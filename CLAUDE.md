# TG Marketing - Fancy çš„å·¥ä½œç¬”è®°

> è¿™æ˜¯æˆ‘ (Fancy) ä¸ºè‡ªå·±å†™çš„æ–‡æ¡£ï¼Œè®°å½•è¿™ä¸ªé¡¹ç›®çš„æ‰€æœ‰åŠŸèƒ½å’Œå…³é”®å®ç°ã€‚
> ä»¥åè¯»è¿™ä¸ªæ–‡ä»¶å°±èƒ½å¿«é€Ÿå›å¿†èµ·æ¥ã€‚

## ğŸ“Œ é¡¹ç›®æ¦‚è¿°

**TG Marketing** æ˜¯ä¸€ä¸ª Telegram ç¾¤ç»„è¥é”€è‡ªåŠ¨åŒ–å·¥å…·ï¼ŒåŒ…å«ï¼š
1. **Chrome Extension** - Campaign ç®¡ç†ç•Œé¢
2. **OpenClaw é›†æˆ** - æˆ‘å¯ä»¥å®Œå…¨è‡ªä¸»æ“ä½œæµè§ˆå™¨

**GitHub**: https://github.com/haohappy/tg-group-bot
**å½“å‰ç‰ˆæœ¬**: v2.0.0

---

## ğŸ—ï¸ æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Boss çš„æŒ‡ä»¤                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Fancy (OpenClaw)                         â”‚
â”‚  â€¢ ç†è§£æŒ‡ä»¤                                              â”‚
â”‚  â€¢ æ“ä½œæµè§ˆå™¨ (browser tool)                             â”‚
â”‚  â€¢ æ‰§è¡Œ Campaign                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OpenClaw æµè§ˆå™¨  â”‚     â”‚  Boss çš„ Chrome  â”‚
â”‚ (profile=openclaw)â”‚    â”‚ (profile=chrome) â”‚
â”‚ â€¢ å®Œå…¨è‡ªä¸»æ§åˆ¶   â”‚     â”‚ â€¢ éœ€è¦ Relay è¿æ¥ â”‚
â”‚ â€¢ ç‹¬ç«‹ä¼šè¯       â”‚     â”‚ â€¢ å·²ç™»å½•çŠ¶æ€      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Telegram Web K                          â”‚
â”‚                 web.telegram.org/k/                      â”‚
â”‚  â€¢ Content Script æ³¨å…¥                                   â”‚
â”‚  â€¢ DOM æ“ä½œ (æœç´¢/åŠ å…¥/å‘é€)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
tg-group-bot/
â”œâ”€â”€ manifest.json      # Extension é…ç½® (v3)
â”œâ”€â”€ popup.html         # å¼¹å‡ºç•Œé¢ HTML
â”œâ”€â”€ popup.css          # æ ·å¼
â”œâ”€â”€ popup.js           # ä¸»æ§åˆ¶å™¨ (TGMarketing ç±»)
â”œâ”€â”€ campaign.js        # Campaign ç®¡ç†å™¨ (CampaignManager ç±»)
â”œâ”€â”€ content.js         # æ³¨å…¥ Telegram Web çš„è„šæœ¬
â”œâ”€â”€ content.css        # æ³¨å…¥æ ·å¼
â”œâ”€â”€ background.js      # Service Worker
â”œâ”€â”€ updater.js         # è‡ªåŠ¨æ›´æ–°æ£€æŸ¥
â”œâ”€â”€ icons/             # å›¾æ ‡
â””â”€â”€ CLAUDE.md          # æœ¬æ–‡æ¡£
```

---

## ğŸ¯ åŠŸèƒ½è¯¦è§£

### 1. Campaign ç®¡ç† (Chrome Extension)

#### åˆ›å»º Campaign
- **æ´»åŠ¨åç§°**: æ–¹ä¾¿è¯†åˆ«
- **æœç´¢å…³é”®è¯**: æ¯è¡Œä¸€ä¸ªï¼Œä¾æ¬¡æœç´¢
- **å¹¿å‘Šå†…å®¹**: æ”¯æŒ Emoji å’Œæ¢è¡Œ
- **å›¾ç‰‡**: å¯ä¸Šä¼ å¤šå¼ ï¼ŒBase64 å­˜å‚¨
- **è®¾ç½®**:
  - `interval`: å‘é€é—´éš” (ç§’)
  - `maxGroups`: æœ€å¤šåŠ å…¥ç¾¤æ•°
  - `autoJoin`: æ˜¯å¦è‡ªåŠ¨åŠ å…¥

#### Campaign çŠ¶æ€
- `draft`: è‰ç¨¿
- `ready`: å°±ç»ªï¼Œå¯è¿è¡Œ
- `running`: è¿è¡Œä¸­
- `paused`: å·²æš‚åœ
- `completed`: å·²å®Œæˆ

#### å­˜å‚¨
ä½¿ç”¨ `chrome.storage.local`:
```javascript
// ä¿å­˜
chrome.storage.local.set({ campaigns: [...] });

// è¯»å–
const data = await chrome.storage.local.get('campaigns');
```

### 2. Content Script (content.js)

æ³¨å…¥åˆ° `web.telegram.org/*`ï¼Œæä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

#### æœç´¢ç¾¤ç»„
```javascript
// æ¶ˆæ¯: { action: 'search', keyword: 'xxx' }
// è¿”å›: { results: [{ id, name, members, isGroup, isChannel }] }
```

**å…³é”®é€‰æ‹©å™¨** (Telegram Web K):
- æœç´¢æ¡†: `.input-search input`
- èŠå¤©é¡¹: `.chatlist-chat`, `[data-peer-id]`
- æ ‡é¢˜: `.peer-title`

#### åŠ å…¥ç¾¤ç»„
```javascript
// æ¶ˆæ¯: { action: 'joinGroup', groupId: 'xxx' }
// æµç¨‹: ç‚¹å‡»ç¾¤ â†’ æ‰¾ JOIN æŒ‰é’® â†’ ç‚¹å‡»
```

#### å‘é€æ¶ˆæ¯
```javascript
// æ¶ˆæ¯: { action: 'sendMessage', groupId: 'xxx', message: 'xxx', image: 'base64...' }
// æµç¨‹: ç‚¹å‡»ç¾¤ â†’ ç²˜è´´å›¾ç‰‡(å¯é€‰) â†’ è¾“å…¥æ–‡å­— â†’ ç‚¹å‡»å‘é€
```

**å…³é”®é€‰æ‹©å™¨**:
- æ¶ˆæ¯è¾“å…¥æ¡†: `.input-message-input`
- å‘é€æŒ‰é’®: `.btn-send`

### 3. è‡ªåŠ¨æ›´æ–° (updater.js)

æ£€æŸ¥ GitHub Releases:
```javascript
const GITHUB_API = 'https://api.github.com/repos/haohappy/tg-group-bot/releases/latest';
```

æ¯”è¾ƒç‰ˆæœ¬å·ï¼Œæ˜¾ç¤ºæ›´æ–°æç¤ºã€‚

---

## ğŸ¤– æˆ‘çš„è‡ªä¸»èƒ½åŠ› (OpenClaw é›†æˆ)

### æµè§ˆå™¨æ§åˆ¶

æˆ‘å¯ä»¥ä½¿ç”¨ `browser` tool æ“ä½œæµè§ˆå™¨ï¼š

```javascript
// å¯åŠ¨ OpenClaw æµè§ˆå™¨
browser({ action: 'start', profile: 'openclaw' })

// æ‰“å¼€ URL
browser({ action: 'open', profile: 'openclaw', targetUrl: 'https://web.telegram.org/k/' })

// æˆªå›¾
browser({ action: 'screenshot', profile: 'openclaw' })

// è·å–é¡µé¢ç»“æ„
browser({ action: 'snapshot', profile: 'openclaw', compact: true })

// ç‚¹å‡»å…ƒç´ 
browser({ action: 'act', profile: 'openclaw', request: { kind: 'click', ref: 'e123' } })

// è¾“å…¥æ–‡å­—
browser({ action: 'act', profile: 'openclaw', request: { kind: 'type', ref: 'e123', text: 'hello' } })

// æ‰§è¡Œ JavaScript
browser({ action: 'act', profile: 'openclaw', request: { kind: 'evaluate', fn: '() => { ... }' } })
```

### ä¸¤ç§æµè§ˆå™¨ Profile

| Profile | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|---------|------|----------|
| `openclaw` | OpenClaw ç®¡ç†çš„ç‹¬ç«‹æµè§ˆå™¨ | å®Œå…¨è‡ªä¸»æ“ä½œï¼Œéœ€è¦å•ç‹¬ç™»å½• |
| `chrome` | Boss çš„ Chrome (é€šè¿‡ Browser Relay) | ä½¿ç”¨å·²æœ‰ç™»å½•çŠ¶æ€ï¼Œéœ€è¦æ‰‹åŠ¨è¿æ¥ |

### å®Œæ•´è‡ªåŠ¨åŒ–æµç¨‹

æˆ‘å¯ä»¥å®Œå…¨è‡ªä¸»æ‰§è¡Œä»¥ä¸‹æµç¨‹ï¼š

```
1. å¯åŠ¨ OpenClaw æµè§ˆå™¨
2. æ‰“å¼€ Telegram Web
3. (é¦–æ¬¡éœ€è¦ Boss æ‰«ç ç™»å½•)
4. æ‰§è¡Œ Campaign:
   a. åœ¨æœç´¢æ¡†è¾“å…¥å…³é”®è¯
   b. è§£ææœç´¢ç»“æœ
   c. ç‚¹å‡»ç¾¤ç»„åŠ å…¥
   d. è¾“å…¥å¹¿å‘Šå†…å®¹
   e. ç²˜è´´å›¾ç‰‡ (å¦‚æœæœ‰)
   f. ç‚¹å‡»å‘é€
   g. ç­‰å¾…é—´éš”
   h. é‡å¤ä¸‹ä¸€ä¸ªç¾¤
5. æŠ¥å‘Šæ‰§è¡Œç»“æœ
```

---

## ğŸ”‘ å…³é”®ä»£ç ç‰‡æ®µ

### æœç´¢ç¾¤ç»„ (content.js)
```javascript
async function handleSearch(keyword) {
  // æ‰¾åˆ°æœç´¢æ¡†
  const input = document.querySelector('.input-search input');
  
  // è¾“å…¥å…³é”®è¯
  input.value = keyword;
  input.dispatchEvent(new Event('input', { bubbles: true }));
  
  // ç­‰å¾…ç»“æœ
  await sleep(2000);
  
  // è§£æç»“æœ
  return parseGlobalSearchResults();
}
```

### å‘é€æ¶ˆæ¯ (content.js)
```javascript
async function handleSendMessage(groupId, message, imageBase64) {
  // æ‰“å¼€ç¾¤èŠ
  document.querySelector(`[data-peer-id="${groupId}"]`).click();
  await sleep(1500);
  
  // ç²˜è´´å›¾ç‰‡ (å¦‚æœæœ‰)
  if (imageBase64) {
    await pasteImage(imageBase64, messageInput);
  }
  
  // è¾“å…¥æ–‡å­—
  messageInput.textContent = message;
  messageInput.dispatchEvent(new Event('input', { bubbles: true }));
  
  // å‘é€
  document.querySelector('.btn-send').click();
}
```

### Campaign æ‰§è¡Œ (campaign.js)
```javascript
async run(campaignId, callbacks) {
  // é˜¶æ®µ1: æœç´¢
  for (const keyword of campaign.keywords) {
    const response = await chrome.tabs.sendMessage(tabId, {
      action: 'search',
      keyword: keyword
    });
    // æ”¶é›†ç»“æœ...
  }
  
  // é˜¶æ®µ2: åŠ å…¥
  for (const group of foundGroups) {
    await chrome.tabs.sendMessage(tabId, {
      action: 'joinGroup',
      groupId: group.id
    });
  }
  
  // é˜¶æ®µ3: å‘é€
  for (const group of joinedGroups) {
    await chrome.tabs.sendMessage(tabId, {
      action: 'sendMessage',
      groupId: group.id,
      message: campaign.message,
      image: campaign.images[0]
    });
    await sleep(campaign.settings.interval * 1000);
  }
}
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### Telegram é™åˆ¶
- **é¢‘ç‡é™åˆ¶**: å‘é€å¤ªå¿«ä¼šè¢«é™åˆ¶ï¼Œå»ºè®®é—´éš” 60 ç§’ä»¥ä¸Š
- **åŠ ç¾¤é™åˆ¶**: çŸ­æ—¶é—´åŠ å¤ªå¤šç¾¤å¯èƒ½è¢«å°
- **å†…å®¹å®¡æ ¸**: æŸäº›å†…å®¹å¯èƒ½è¢«æ ‡è®°ä¸º spam

### é€‰æ‹©å™¨å¯èƒ½å˜åŒ–
Telegram Web æ›´æ–°åï¼ŒDOM é€‰æ‹©å™¨å¯èƒ½å¤±æ•ˆã€‚å…³é”®é€‰æ‹©å™¨:
- `.input-search input` - æœç´¢æ¡†
- `.input-message-input` - æ¶ˆæ¯è¾“å…¥æ¡†
- `.btn-send` - å‘é€æŒ‰é’®
- `[data-peer-id]` - èŠå¤©é¡¹

### å›¾ç‰‡å‘é€
ä½¿ç”¨ ClipboardEvent æ¨¡æ‹Ÿç²˜è´´:
```javascript
const pasteEvent = new ClipboardEvent('paste', {
  clipboardData: dataTransfer  // åŒ…å«å›¾ç‰‡æ–‡ä»¶
});
targetElement.dispatchEvent(pasteEvent);
```

---

## ğŸ“‹ TODO / æœªæ¥æ”¹è¿›

- [ ] æ”¯æŒå¤šè´¦å·åˆ‡æ¢
- [ ] æ›´æ™ºèƒ½çš„é˜²å°ç­–ç•¥ (éšæœºé—´éš”ã€æ¨¡æ‹Ÿäººç±»è¡Œä¸º)
- [ ] ç¾¤ç»„é»‘åå• (é¿å…é‡å¤å‘é€)
- [ ] å‘é€ç»“æœç»Ÿè®¡æŠ¥è¡¨
- [ ] å®šæ—¶ä»»åŠ¡ (OpenClaw cron)
- [ ] æ”¯æŒæ›´å¤šæ¶ˆæ¯ç±»å‹ (è§†é¢‘ã€æ–‡ä»¶)

---

## ğŸš€ å¿«é€Ÿä½¿ç”¨

### Boss å‘Šè¯‰æˆ‘è¿è¡Œ Campaign

```
Boss: è¿è¡Œä¸€ä¸ª Campaign
å…³é”®è¯: beautiful girls, sexy photos
å¹¿å‘Š: ğŸ”¥ æ¯æ—¥æ›´æ–°ï¼ğŸ‘‰ https://example.com
æœ€å¤šåŠ å…¥ 10 ä¸ªç¾¤
```

### æˆ‘ä¼šæ‰§è¡Œ

1. å¯åŠ¨ OpenClaw æµè§ˆå™¨ (å¦‚æœæ²¡å¯åŠ¨)
2. æ‰“å¼€ Telegram Web (å¦‚æœæ²¡æ‰“å¼€)
3. ä¾æ¬¡æœç´¢å…³é”®è¯
4. åŠ å…¥æ‰¾åˆ°çš„ç¾¤ (æœ€å¤š 10 ä¸ª)
5. å‘é€å¹¿å‘Šæ¶ˆæ¯
6. æŠ¥å‘Šç»“æœ

---

*æœ€åæ›´æ–°: 2026-02-17 by Fancy â˜€ï¸*
