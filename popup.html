<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TG Group Bot</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>🤖 TG Group Bot <span id="version" class="version"></span></h1>
      <div id="status" class="status">检查连接中...</div>
      <div id="update-banner" class="update-banner hidden">
        <span>🎉 新版本可用: <strong id="new-version"></strong></span>
        <button id="update-btn" class="btn small">下载更新</button>
      </div>
    </header>

    <!-- Tab Navigation -->
    <nav class="tabs">
      <button class="tab active" data-tab="search">🔍 搜群</button>
      <button class="tab" data-tab="groups">📋 群列表</button>
      <button class="tab" data-tab="message">💬 发消息</button>
      <button class="tab" data-tab="templates">⚙️ 模板</button>
    </nav>

    <!-- Search Tab -->
    <section id="search-tab" class="tab-content active">
      <div class="template-selector">
        <select id="keyword-select">
          <option value="">-- 选择关键词模板 --</option>
        </select>
      </div>
      <div class="input-group">
        <input type="text" id="keyword" placeholder="输入关键词搜索群组...">
        <button id="search-btn" class="btn primary">搜索</button>
      </div>
      <div id="search-results" class="results-list"></div>
    </section>

    <!-- Groups Tab -->
    <section id="groups-tab" class="tab-content">
      <div class="toolbar">
        <span id="group-count">已保存: 0 个群</span>
        <button id="clear-groups" class="btn small">清空</button>
      </div>
      <div id="saved-groups" class="results-list"></div>
    </section>

    <!-- Message Tab -->
    <section id="message-tab" class="tab-content">
      <div class="template-selector">
        <select id="message-select">
          <option value="">-- 选择消息模板 --</option>
        </select>
      </div>
      <div class="input-group">
        <textarea id="message-content" placeholder="输入要发送的消息内容..."></textarea>
      </div>
      <div class="settings">
        <label>
          发送间隔: <input type="number" id="interval" value="30" min="10" max="300"> 秒
        </label>
      </div>
      <div class="actions">
        <button id="send-btn" class="btn primary">开始发送</button>
        <button id="stop-btn" class="btn danger" disabled>停止</button>
      </div>
      <div id="send-log" class="log"></div>
    </section>

    <!-- Templates Tab -->
    <section id="templates-tab" class="tab-content">
      <!-- Keywords Section -->
      <div class="template-section">
        <h3>🔑 关键词模板</h3>
        <div class="template-form">
          <input type="text" id="new-keyword-name" placeholder="模板名称">
          <input type="text" id="new-keyword-value" placeholder="关键词 (多个用逗号分隔)">
          <button id="add-keyword-btn" class="btn small primary">添加</button>
        </div>
        <div id="keyword-templates" class="template-list"></div>
      </div>

      <!-- Messages Section -->
      <div class="template-section">
        <h3>💬 消息模板</h3>
        <div class="template-form">
          <input type="text" id="new-message-name" placeholder="模板名称">
          <textarea id="new-message-value" placeholder="消息内容"></textarea>
          <button id="add-message-btn" class="btn small primary">添加</button>
        </div>
        <div id="message-templates" class="template-list"></div>
      </div>

      <!-- Import/Export -->
      <div class="template-section">
        <h3>📦 导入/导出</h3>
        <div class="import-export">
          <button id="export-btn" class="btn small">导出模板</button>
          <button id="import-btn" class="btn small">导入模板</button>
          <input type="file" id="import-file" accept=".json" style="display:none">
        </div>
      </div>
    </section>
  </div>

  <script src="updater.js"></script>
  <script src="popup.js"></script>
</body>
</html>
